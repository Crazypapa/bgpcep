/**
* Generated file

* Generated from: yang module name: pcep-impl  yang module local name: pcep-dispatcher-impl
* Generated by: org.opendaylight.controller.config.yangjmxgenerator.plugin.JMXGenerator
* Generated at: Thu Oct 31 16:24:54 CET 2013
*
* Do not modify this file unless it is present under src/main directory
*/
package org.opendaylight.yang.gen.v1.urn.opendaylight.params.xml.ns.yang.pcep.impl.rev130627;

import io.netty.util.HashedWheelTimer;
import io.netty.util.Timer;

import org.opendaylight.controller.config.api.JmxAttributeValidationException;
import org.opendaylight.protocol.pcep.impl.DefaultPCEPSessionNegotiatorFactory;
import org.opendaylight.protocol.pcep.impl.PCEPDispatcherImpl;
import org.opendaylight.protocol.pcep.object.PCEPOpenObject;

/**
*
*/
public final class PCEPDispatcherImplModule extends org.opendaylight.yang.gen.v1.urn.opendaylight.params.xml.ns.yang.pcep.impl.rev130627.AbstractPCEPDispatcherImplModule
{

    public PCEPDispatcherImplModule(org.opendaylight.controller.config.api.ModuleIdentifier name, org.opendaylight.controller.config.api.DependencyResolver dependencyResolver) {
        super(name, dependencyResolver);
    }

    public PCEPDispatcherImplModule(org.opendaylight.controller.config.api.ModuleIdentifier name, org.opendaylight.controller.config.api.DependencyResolver dependencyResolver, PCEPDispatcherImplModule oldModule, java.lang.AutoCloseable oldInstance) {
        super(name, dependencyResolver, oldModule, oldInstance);
    }

    @Override
    public void validate(){
		super.validate();
		JmxAttributeValidationException.checkCondition(getMaxUnknownMessages() > 0, "Parameter 'maxUnknownMessages' " +
				"must be greater than 0", this.maxUnknownMessagesJmxAttribute);
	}

    @Override
    public java.lang.AutoCloseable createInstance() {
        Timer timer = new HashedWheelTimer();
        PCEPOpenObject localPrefs = getPcepSessionProposalFactoryDependency().getSessionProposal(null, -1);
        DefaultPCEPSessionNegotiatorFactory negFactory = new DefaultPCEPSessionNegotiatorFactory(timer, localPrefs, getMaxUnknownMessages());

        final PCEPDispatcherImpl instance = new PCEPDispatcherImpl(negFactory);
        return instance;
    }
}
